import { useState } from "react";
import { Pencil, Check, Trash, Plus } from "lucide-react";

export default function ConfigItemsManager() {
  const [items, setItems] = useState([
    { id: 1, value: "Config Item 1", editing: false },
    { id: 2, value: "Config Item 2", editing: false },
  ]);

  const handleEdit = (id) => {
    setItems(items.map(item => item.id === id ? { ...item, editing: true } : item));
  };

  const handleSave = (id) => {
    setItems(items.map(item => item.id === id ? { ...item, editing: false } : item));
  };

  const handleChange = (id, value) => {
    setItems(items.map(item => item.id === id ? { ...item, value } : item));
  };

  const handleAdd = () => {
    const newId = items.length ? Math.max(...items.map(i => i.id)) + 1 : 1;
    setItems([...items, { id: newId, value: "", editing: true }]);
  };

  const handleRemove = (id) => {
    setItems(items.filter(item => item.id !== id));
  };

  return (
    <div className="max-w-md mx-auto p-4 bg-white shadow rounded">
      <h2 className="text-lg font-semibold mb-4">Configuration Items</h2>
      <ul className="space-y-2">
        {items.map(item => (
          <li key={item.id} className="flex items-center space-x-2">
            <input
              type="text"
              className={`flex-1 border rounded p-2 ${
                item.editing ? "border-blue-500" : "border-gray-300 bg-gray-100"
              }`}
              value={item.value}
              onChange={(e) => handleChange(item.id, e.target.value)}
              disabled={!item.editing}
            />
            {!item.editing ? (
              <button onClick={() => handleEdit(item.id)} className="text-blue-500">
                <Pencil size={18} />
              </button>
            ) : (
              <button onClick={() => handleSave(item.id)} className="text-green-500">
                <Check size={18} />
              </button>
            )}
            <button onClick={() => handleRemove(item.id)} className="text-red-500">
              <Trash size={18} />
            </button>
          </li>
        ))}
      </ul>
      <button
        onClick={handleAdd}
        className="mt-4 px-4 py-2 bg-blue-500 text-white rounded flex items-center space-x-1"
      >
        <Plus size={16} /> <span>Add Item</span>
      </button>
    </div>
  );
}
